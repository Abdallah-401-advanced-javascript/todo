(this["webpackJsonpdemo-context-api"]=this["webpackJsonpdemo-context-api"]||[]).push([[0],{169:function(e,t,n){e.exports=n(324)},193:function(e,t,n){},199:function(e,t){},201:function(e,t){},215:function(e,t){},217:function(e,t){},245:function(e,t){},247:function(e,t){},248:function(e,t){},253:function(e,t){},255:function(e,t){},262:function(e,t){},264:function(e,t){},282:function(e,t){},285:function(e,t){},301:function(e,t){},304:function(e,t){},321:function(e,t,n){},323:function(e,t,n){},324:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(44),r=n.n(c),l=n(70),i=n(21),u=n(35),s=n(94),m=n(24),d=n(71),p=n(167);var h=function(e){var t=Object(a.useState)({}),n=Object(i.a)(t,2),c=n[0],r=n[1],l=function(e){r(Object(s.a)(Object(s.a)({},c),{},Object(u.a)({},e.target.name,e.target.value)))};return o.a.createElement(o.a.Fragment,null,o.a.createElement("main",null,o.a.createElement(m.a,{onSubmit:function(t){t.preventDefault(),t.target.reset(),e.handleSubmit(c);r({})}},o.a.createElement(d.a,{style:{width:"18rem"}},o.a.createElement(d.a.Body,null,o.a.createElement(d.a.Title,null,"Add To Do Item Item"),o.a.createElement(m.a.Group,{controlId:"formBasicEmail"},o.a.createElement(m.a.Label,null,"To Do Item"),o.a.createElement(m.a.Control,{type:"text",name:"text",placeholder:"Item Details",onChange:l})),o.a.createElement("label",null,o.a.createElement("span",null,"Difficulty Rating"),o.a.createElement("input",{defaultValue:"1",type:"range",min:"1",max:"5",name:"difficulty",onChange:l})),o.a.createElement(m.a.Group,{controlId:"formBasicEmail"},o.a.createElement(m.a.Label,null,"Assigned To"),o.a.createElement(m.a.Control,{type:"text",name:"assignee",placeholder:"Assignee Name",onChange:l})),o.a.createElement(p.a,{type:"submit",variant:"primary"},"Add Item"))))))},f=o.a.createContext();var g=function(e){var t=Object(a.useState)([1]),n=Object(i.a)(t,2),c=n[0],r=n[1],l=Object(a.useState)(0),u=Object(i.a)(l,2),s=u[0],m=u[1],d=Object(a.useState)(),p=Object(i.a)(d,2),h=p[0],g=p[1],E={array:c,changeTitleTo:r,pages:function(e){var t=document.getElementsByName("pages");console.log("number",t);var n=new Array(Math.ceil(e.length/t[0].value));r([].concat(n))},view:function(e){var t=document.getElementsByName("pages")[0].value,n=Number(t)+t*e;m(Number(t*e)),g(n)},start:s,count:h};return o.a.createElement(f.Provider,{value:E},e.children)};var E=function(e){var t=Object(a.useContext)(f);return o.a.createElement(o.a.Fragment,null,o.a.createElement("ul",null,o.a.createElement("input",{type:"Number",name:"pages",placeholder:"number pages"}),o.a.createElement("button",{class:"btn-primary",onClick:function(){return t.pages(e.list)}},"Number of element"),e.list.sort((function(e,t){return e.difficulty>t.difficulty?1:t.difficulty>e.difficulty?-1:0})).slice(t.start,t.count).map((function(t,n){return o.a.createElement("li",{className:"complete-".concat(t.complete.toString()),key:t._id},o.a.createElement("span",{onClick:function(){return e.handleComplete(t._id)}},t.text),o.a.createElement("span",null,"Difficulty: "+t.difficulty),o.a.createElement("button",{onClick:function(){return e.handleDelete(t._id)}},"Delete "),o.a.createElement("button",{onClick:function(){return e.handleUpdate(n)}},"Update "),o.a.createElement("input",{type:"text",name:n,placeholder:"Update text "+t.text}))}))),o.a.createElement("ul",{id:"btn1"},t.array.map((function(e,n){return o.a.createElement("li",{key:e},o.a.createElement("button",{id:"btn-primary",onClick:function(){return t.view(n)}},n+1))}))),o.a.createElement("div",null,o.a.createElement(g,{list:e.list})))},b=n(54),v=n(95),y=n.n(v),O=(n(193),"https://access-denied-lab-32.herokuapp.com/todo"),j=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){y.a.get(O).then((function(e){console.log(e),c(e.data)}),[]).catch((function(e){console.log(e)}))}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement(b.a,{color:"success"},o.a.createElement("h2",null,"There are ",n.filter((function(e){return!e.complete})).length," Items To Complete"))),o.a.createElement("section",{className:"todo"},o.a.createElement("div",null,o.a.createElement(h,{handleSubmit:function(e){e.due=new Date,fetch(O,{method:"post",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){c([].concat(Object(l.a)(n),[e]))})).catch(console.error)}})),o.a.createElement("div",null,o.a.createElement(E,{list:n,handleComplete:function(e){var t=n.filter((function(t){return t._id===e}))[0]||{},a=n.indexOf(t);console.log(a,"index"),t._id&&(t.complete=!t.complete,fetch(O,{method:"put",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){console.log("savedItemsavedItemsavedItem",e),n[a]=e,c(Object(l.a)(n))})).catch(console.error))},handleDelete:function(e){y.a.delete(O,{headers:{"Content-Type":"application/json"},data:{_id:e}}).then((function(e){window.location.reload(!0)})).catch(console.error)},handleUpdate:function(e){var t=document.getElementsByName(e)[0].value;n[e].text=t,console.log("arrarrarrarr",n),fetch(O,{method:"put",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(n[e])}).then((function(e){return e.json()})).then((function(e){console.log("savedItemsavedItemsavedItem",e),c(Object(l.a)(n))})).catch(console.error),c(n)}}))))},x=n(23),C=n(68);var k=function(e){return o.a.createElement("header",null,o.a.createElement(x.a,{bg:"light",expand:"lg"},o.a.createElement(x.a.Brand,null,"Home"),o.a.createElement(x.a.Toggle,{"aria-controls":"basic-navbar-nav"}),o.a.createElement(x.a.Collapse,{id:"basic-navbar-nav"},o.a.createElement(C.a,{className:"mr-auto"},o.a.createElement(C.a.Link,{href:"#home"},"Home")))))};var S=function(e){return o.a.createElement("footer",null,o.a.createElement(x.a,{bg:"light",expand:"lg"},o.a.createElement(x.a.Brand,null,"\xa9 2020 To-do or not to-do thats is the question")))},T=n(38),I=n(39),w=n(43),N=n(40),_=n(55),D=n.n(_),A=n(96),B=n(97),L=n.n(B),P=n(168),H=n.n(P),R=Object({NODE_ENV:"production",PUBLIC_URL:"/todo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_SECRET:"12345678910"}).REACT_APP_API||"https://access-denied-lab-32.herokuapp.com",U=o.a.createContext(),F=function(e){Object(w.a)(n,e);var t=Object(N.a)(n);function n(e){var a;return Object(T.a)(this,n),(a=t.call(this,e)).login=function(){var e=Object(A.a)(D.a.mark((function e(t,n){var o,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(R,"/signin"),{method:"POST",mode:"cors",cache:"no-cache",headers:new Headers({Authorization:"Basic ".concat(btoa("".concat(t,":").concat(n)))})});case 3:return o=e.sent,e.next=6,o.json();case 6:c=e.sent,console.log("res: ",c),console.log("res.token: ",c.token),a.validateToken(c.token),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}(),a.logout=function(){a.setLoginState(!1,null,{})},a.validateToken=function(e){try{console.log("12345678910");var t=H.a.verify(e,"12345678910");console.log("user: ",t),a.setLoginState(!0,e,t)}catch(n){a.logout(),console.log("token Validation error")}},a.setLoginState=function(e,t,n){L.a.save("auth",t),a.setState({token:t,loggedIn:e,user:n})},a.signup=function(){var e=Object(A.a)(D.a.mark((function e(t,n){var o,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(R,"/signup"),{method:"post",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"".concat(t),password:"".concat(n),role:"user"})});case 3:return o=e.sent,e.next=6,o.json();case 6:return c=e.sent,console.log("res: ",c),console.log("res.token: ",c.token),e.next=11,alert("Hello! I am an alert box!!");case 11:a.validateToken(c.token),e.next=19;break;case 14:return e.prev=14,e.t0=e.catch(0),console.error(e.t0),e.next=19,alert("Hello! I am an alert box!!");case 19:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),a.state={loggedIn:!1,token:null,login:a.login,logout:a.logout,signup:a.signup,user:{}},a}return Object(I.a)(n,[{key:"componentDidMount",value:function(){var e=L.a.load("auth")||null;this.validateToken(e)}},{key:"render",value:function(){return o.a.createElement(U.Provider,{value:this.state},this.props.children)}}]),n}(o.a.Component),J=function(e){return e.condition?e.children:null},W=function(e){Object(w.a)(n,e);var t=Object(N.a)(n);function n(){return Object(T.a)(this,n),t.apply(this,arguments)}return Object(I.a)(n,[{key:"render",value:function(){var e=!1;try{e=this.context.loggedIn&&(!this.props.capability||this.context.user.capabilities.includes(this.props.capability)),console.log("okToRender: ",e)}catch(t){console.warn("Not Authorized!")}return o.a.createElement(J,{condition:e},this.props.children)}}]),n}(o.a.Component);W.contextType=U;var z=W,K=(n(321),function(e){Object(w.a)(n,e);var t=Object(N.a)(n);function n(e){var a;return Object(T.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(u.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.context.login(a.state.username,a.state.password)},a.handleSignup=function(e){e.preventDefault(),a.context.signup(a.state.username,a.state.password)},a.state={username:"",password:""},a}return Object(I.a)(n,[{key:"render",value:function(){return console.log("this.context: ",this.context),o.a.createElement("section",null,o.a.createElement(J,{condition:this.context.loggedIn},o.a.createElement("button",{onClick:this.context.logout,id:"btn-primary"},"Logout")),o.a.createElement(J,{condition:!this.context.loggedIn},o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("input",{placeholder:"userName",name:"username",onChange:this.handleChange}),o.a.createElement("input",{placeholder:"password",name:"password",onChange:this.handleChange}),o.a.createElement("button",{id:"btn-primary"},"Login"))),o.a.createElement(J,{condition:!this.context.loggedIn},o.a.createElement("form",{onSubmit:this.handleSignup},o.a.createElement("input",{placeholder:"userName",name:"username",onChange:this.handleChange}),o.a.createElement("input",{placeholder:"password",name:"password",onChange:this.handleChange}),o.a.createElement("button",{id:"btn-primary"},"Signup"))))}}]),n}(o.a.Component));K.contextType=U;var V=K,G=(n(322),n(323),function(e){return o.a.createElement(z,{capability:"dance"},o.a.createElement("span",null,"Fake Update Link "))}),M=function(e){return o.a.createElement(z,{capability:"read"},o.a.createElement(g,null,o.a.createElement(j,null)),o.a.createElement(S,null))},q=function(e){return o.a.createElement(z,{capability:"delete"},o.a.createElement("span",null,"Fake Delete Link "))};var Q=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(F,null,o.a.createElement(k,null),o.a.createElement(V,null),o.a.createElement(b.a,{variant:"success"},o.a.createElement(b.a.Heading,null,"Hey, nice to see you"),o.a.createElement("p",null,"Welcome to our site you can signin if you have account or simply create new account (:"),o.a.createElement("hr",null),o.a.createElement("img",{src:"https://thumbs.gfycat.com/AbsoluteBelatedClam-size_restricted.gif",alt:"Italian Trulli"})),o.a.createElement("hr",null),o.a.createElement(G,null),o.a.createElement(q,null),o.a.createElement(M,null)))};function X(){return o.a.createElement(Q,null)}var Y=document.getElementById("root");r.a.render(o.a.createElement(X,null),Y)}},[[169,1,2]]]);
//# sourceMappingURL=main.9a0be70a.chunk.js.map